---
interface Props {
	title: string;
}

const { title } = Astro.props;
---

<!doctype html>
<html lang="es">
	<head>
		<meta charset="UTF-8" />
		<meta name="description" content="Portafolio Futurista" />
		<meta name="viewport" content="width=device-width" />
		<link rel="icon" type="image/svg+xml" href="/favicon.svg" />
        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link href="https://fonts.googleapis.com/css2?family=Exo+2:wght@300;400;700&family=Orbitron:wght@400;700;900&display=swap" rel="stylesheet">
        <script is:inline src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
        <script is:inline src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollTrigger.min.js"></script>
		<title>{title}</title>
	</head>
	<body>
        <canvas id="matrix-bg"></canvas>
        
        <div class="noise-overlay"></div>
        <div id="cursor" class="cursor-outer"></div>
        <div id="cursor-dot" class="cursor-inner"></div>

		<slot />
	</body>
</html>

<style is:global>
	:root {
		--bg-color: #050505;
		--accent: #00f3ff; /* Cyan Neon */
		--secondary: #bc13fe; /* Purple Neon */
		--text-main: #e0e0e0;
        --font-heading: 'Orbitron', sans-serif;
        --font-body: 'Exo 2', sans-serif;
	}

    * { box-sizing: border-box; margin: 0; padding: 0; }

	html {
		font-family: var(--font-body);
		background: var(--bg-color);
		color: var(--text-main);
        scroll-behavior: smooth;
        overflow-x: hidden;
	}

    /* Fondo Canvas */
    #matrix-bg {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        z-index: -2; /* Al fondo */
        opacity: 0.2; /* Sutil para que no moleste la lectura */
    }

    /* Efecto de ruido opcional */
    .noise-overlay {
        position: fixed;
        top: 0; left: 0; width: 100%; height: 100%;
        background: url('https://grainy-gradients.vercel.app/noise.svg');
        opacity: 0.05;
        z-index: -1;
        pointer-events: none;
    }

    h1, h2, h3 { font-family: var(--font-heading); text-transform: uppercase; letter-spacing: 2px; }
    p { line-height: 1.6; }
    
    /* Utilidades */
    .container {
        max-width: 1200px;
        margin: 0 auto;
        padding: 0 20px;
    }
    
    .gradient-text {
        background: linear-gradient(90deg, var(--accent), var(--secondary));
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
    }
    /* El círculo grande */
    .cursor-outer {
        position: fixed;
        top: 0; left: 0;
        width: 40px; height: 40px;
        border: 1px solid var(--accent);
        border-radius: 50%;
        pointer-events: none; /* CRUCIAL: Para poder clickear a través de él */
        transform: translate(-50%, -50%);
        z-index: 9999;
        transition: width 0.3s, height 0.3s, background-color 0.3s;
        mix-blend-mode: difference; /* Invierte colores sobre fondos claros */
    }

    /* El punto central */
    .cursor-inner {
        position: fixed;
        top: 0; left: 0;
        width: 8px; height: 8px;
        background-color: var(--secondary);
        border-radius: 50%;
        pointer-events: none;
        transform: translate(-50%, -50%);
        z-index: 9999;
    }

    /* Clase para cuando haces hover en enlaces */
    body.hovering .cursor-outer {
        width: 60px;
        height: 60px;
        background-color: rgba(0, 243, 255, 0.1);
        border-color: transparent;
    }
</style>

<script>
    // Script para el efecto de lluvia de código (Matrix style pero minimalista)
    const canvas = document.getElementById('matrix-bg') as HTMLCanvasElement;
    const ctx = canvas.getContext('2d');

    let width = canvas.width = window.innerWidth;
    let height = canvas.height = window.innerHeight;

    // Caracteres relacionados a programación
    const chars = '01{}[]<>/*-+=$%&@#';
    const drops = [];
    const fontSize = 14;
    const columns = width / fontSize;

    for (let i = 0; i < columns; i++) {
        drops[i] = 1;
    }

    function draw() {
        // Efecto de estela
        ctx.fillStyle = 'rgba(5, 5, 5, 0.05)';
        ctx.fillRect(0, 0, width, height);

        ctx.fillStyle = '#00f3ff'; // Color del texto (Cyan)
        ctx.font = fontSize + 'px monospace';

        for (let i = 0; i < drops.length; i++) {
            const text = chars.charAt(Math.floor(Math.random() * chars.length));
            ctx.fillText(text, i * fontSize, drops[i] * fontSize);

            if (drops[i] * fontSize > height && Math.random() > 0.975) {
                drops[i] = 0;
            }
            drops[i]++;
        }
    }

    window.addEventListener('resize', () => {
        width = canvas.width = window.innerWidth;
        height = canvas.height = window.innerHeight;
    });

    setInterval(draw, 33);

    // Script para mover el cursor
    const cursor = document.getElementById('cursor');
    const cursorDot = document.getElementById('cursor-dot');

    window.addEventListener('mousemove', (e) => {
        // El punto sigue al mouse instantáneamente
        gsap.to(cursorDot, { x: e.clientX, y: e.clientY, duration: 0 });
        
        // El círculo exterior tiene un poco de "lag" (inercia)
        gsap.to(cursor, { x: e.clientX, y: e.clientY, duration: 0.15 });
    });

    // Detectar links para agrandar el cursor
    const links = document.querySelectorAll('a, button, .card');
    links.forEach(link => {
        link.addEventListener('mouseenter', () => document.body.classList.add('hovering'));
        link.addEventListener('mouseleave', () => document.body.classList.remove('hovering'));
    });
</script>